<%= render 'shared/content_title', title: @ticket.name%>

<p><%= @ticket.body %></p>
<p>Created by: <%= @ticket.creator.name %></p>
<% if @ticket.assignee %>
  <p>Assigned to: <%= @ticket.assignee.name %></p>
<% end %>
<p>Status: <%= @ticket.status %></p>

<% if logged_in? %>
  <div class="mb-4">
    <%= link_to "Edit", edit_ticket_path(@ticket), class: "btn btn-outline-secondary btn-sm"%>
    <%= link_to "Delete", ticket_path(@ticket), method: :delete, class: "btn btn-outline-danger btn-sm"%>
  </div>
  <div class="mb-4">
    <%= render 'comments/form'%>
  </div>
<% end %>

<h2>Comments</h2>

<table class="table">
  <thead>
    <tr>
      <th scope="col">Comment</th>
      <th scope="col">By</th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    <% @ticket.comments.each do |comment|%>
      <%= render 'comments/comment', comment: comment %>
    <% end %>
  </tbody>
</table>
